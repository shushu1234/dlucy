<!DOCTYPE html>


<html lang="en">

<!-- HEAD 开始-->

<head>

    <meta charset="utf-8"/>

    <title>船运管理系统</title>


    <meta content="" name="description"/>

    <meta content="" name="author"/>

    <!-- 全局样式开始-->

    <link href="media/mycss/core.css" rel="stylesheet" type="text/css"/>
    <!-- 全局样式结束 -->

    <!-- 本页样式开始 -->

    <link rel="shortcut icon" href="media/image/favicon.ico"/>

    <!-- 本页样式结束 -->


</head>

<!-- HEAD 结束 -->

<!--  BODY 开始-->

<body class="page-header-fixed">

<!--HEADER 开始-->

<div class="header navbar navbar-inverse navbar-fixed-top myheader" >

    <!-- 导航栏开始 -->

    <div class="navbar-inner">

        <div class="container-fluid navbar hor-menu hidden-phone hidden-tablet">

            <div class="navbar hor-menu  hidden-tablet">
                <div class="navbar-inner">
                    <ul class="nav">



                        <li class="active">

                            <a href="jinduchaxun.html">船舶到港确认

                                <span class="selected"></span>
                            </a>

                        </li>
                        <li >

                            <a href="kehuweituo.html">

                                客户委托
                            </a>

                        </li>
                        <li>

                            <a href="#">提货方</a>

                        </li>
                        <li>

                            <a href="#">提箱(空/套)</a>

                        </li>
                        <li>

                            <a href="#">箱进场</a>

                        </li>
                        <li>

                            <a href="#">箱出场</a>

                        </li>
                        <li>

                            <a href="#">重箱进场</a>

                        </li>
                        <li>

                            <a href="#">箱预约确认</a>

                        </li>
                        <li>

                            <a href="#">重箱出场</a>

                        </li>
                        <li>

                            <a href="#">重箱进港</a>

                        </li>
                        <li>

                            <a href="#">重箱装船</a>

                        </li>
                        <li>

                            <a href="#">到港放货</a>

                        </li>
                    </ul>

                </div>

            </div>

        </div>

    </div>

    <!-- 导航栏结束 -->
</div>

<!--HEADER 结束-->


<!--CONTAINER 开始 -->

<div class="page-container row-fluid mycontainer" >

    <!-- 页面开始 -->

    <div class="page-content" style="margin-left: 0px">


        <div class="container-fluid">

            <!-- 页面内容开始-->
            <div class="row-fluid">

                <form action="#" class="form-horizontal"
                      onSubmit="return checkAll()">
                    <div class="span8">

                        <!-- BEGIN BORDERED TABLE PORTLET-->

                        <div class="portlet box blue" style="margin-top: 50px">

                            <div class="portlet-title">

                                <div class="caption"><i class="icon-list-ol"></i>箱号信息</div>


                            </div>

                            <div class="portlet-body" style="overflow: scroll;height: 100px;padding-bottom: 31px;background-color: aliceblue">

                                <table id="opera-table" class="table table-striped table-bordered table-hover ">

                                    <thead>

                                    <tr>

                                        <th>#</th>

                                        <th>指令号</th>

                                        <th>客户名称</th>

                                        <th >品名</th>

                                        <th>箱型</th>

                                        <th>箱量</th>

                                        <th >目的港</th>

                                        <th>贸易方式</th>

                                        <th>交货期限</th>

                                        <th >接单人</th>

                                        <th>承运商</th>

                                        <th>船名航次</th>

                                        <th >提单号</th>


                                    </tr>

                                    </thead>

                                    <tbody id="tbody-box" >

                                    <!--<tr>-->

                                        <!--<td>1</td>-->

                                        <!--<td>D001</td>-->

                                        <!--<td>伊利</td>-->

                                        <!--<td >TGXKL0123</td>-->
                                        <!--<td>1</td>-->

                                        <!--<td>D001</td>-->

                                        <!--<td>伊利</td>-->

                                        <!--<td >TGXKL0123</td>-->
                                        <!--<td>1</td>-->

                                        <!--<td>暗黑三姐夫和大家黄寺大街</td>-->

                                        <!--<td>伊利</td>-->

                                        <!--<td >TGXKL0123</td>-->

                                    <!--</tr>-->



                                    </tbody>

                                </table>

                            </div>

                        </div>

                        <!-- END BORDERED TABLE PORTLET-->

                    </div>
                    <div class="span4">


                        <!-- 客户信息开始-->

                        <div class="portlet box blue">

                            <div class="portlet-title" style="margin-top: 50px;" >

                                <div class="caption"><i class="icon-calendar"></i>日期录入</div>

                                <div class="tools">
                                </div>

                            </div>

                            <div class="portlet-body form">

                                <!-- 客户信息 FORM 开始-->


                                <input value="0" id="info-id" type="hidden">
                                <input value="0" id="info-status" type="hidden">
                                <input value="0" id="info-timestamp" type="hidden">
                                <input value="0" id="info-addtime" type="hidden">

                                <div class="row-fluid" style="background-color: aliceblue" >

                                    <div class="span12">
                                        <div class="control-group" id="group-pickdate">

                                            <label class="control-label">到港日期</label>

                                            <div class="controls">

                                                <input class="m-wrap span12 m-ctrl-medium date-picker"
                                                       id="arriveport_date" readonly
                                                       size="16" type="text" value="" data-date-format="yyyy-mm-dd"/>

                                            </div>

                                        </div>
                                    </div>

                                </div>



                                <div class="form-actions">

                                    <button type="submit" class="btn blue" id="btn-submit-opera" data-toggle="modal"
                                              style="float: right">确认提交
                                    </button>
                                    <!--<a class=" btn yellow" data-toggle="modal" href="#static" onclick="modalConfirm()">View Demo</a>-->
                                    <button type="reset" class="btn" id="btn-reset" style="float: right">取消重置</button>
                                    <div id="static" class="modal hide fade" tabindex="-1">

                                        <div class="modal-body">

                                            <p>请确认信息:</p>
                                            <table>
                                                <tr>
                                                    <td id="td-order"></td>
                                                    <td></td>
                                                    <td id="td-boxnum"></td>

                                                    <td id="td-boxtype"></td>

                                                    <td id="td-goodsname"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-clientname"></td>
                                                    <td></td>
                                                    <td id="td-port"></td>

                                                    <td id="td-tradetype"></td>

                                                    <td id="td-billcycle"></td>
                                                </tr>
                                                <tr>
                                                    <td><br></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="5">==================提货信息==================</td>
                                                </tr>
                                                <tr>
                                                    <td id="td-pickaddr" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-pickdate" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-pickperson" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-picktel" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td><br></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">==================收货信息==================</td>
                                                </tr>
                                                <tr>
                                                    <td id="td-recaddr" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-recdate" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-recperson" colspan="5"></td>
                                                </tr>
                                                <tr>
                                                    <td id="td-rectel" colspan="5"></td>
                                                </tr>

                                            </table>
                                        </div>

                                        <div class="modal-footer">

                                            <button type="button" data-dismiss="modal" class="btn" id="btn-return">
                                                返回修改
                                            </button>
                                            <button class="btn green" data-toggle="modal" href="#static2"
                                                    id="btn-submit" onclick="checkAll()">继续提交
                                            </button>
                                        </div>

                                    </div>
                                    <div id="static2" class="modal hide fade" tabindex="-1">

                                        <div class="modal-body">

                                            <h3 id="info-attention" style="text-align: center"></h3>

                                        </div>

                                        <div class="modal-footer">

                                            <button type="button" data-dismiss="modal" class="btn green">确认</button>

                                        </div>

                                    </div>
                                </div>


                                <!-- 客户信息 FORM 结束-->

                            </div>

                        </div>

                        <!-- 客户信息结束-->

                    </div>
                </form>
            </div>


            <div class="row-fluid">

                <div class="span12">

                    <!-- 业务列表开始　-->

                    <div class="portlet box green">
                        <!--<div class="portlet box green" style="width:1240px;overflow-x:auto;overflow-y:hidden;">-->
                        <div class="portlet-title">

                            <div class="caption"><i class="icon-list"></i>业务列表</div>

                            <div class="tools">

                                <a href="javascript:;" class="reload"></a>

                            </div>

                        </div>

                        <div class="portlet-body" style="background-color: azure ;">

                            <table class="table table-striped table-bordered table-hover table-full-width"
                                   id="sample_1">

                                <thead>

                                <tr>
                                    <th style="display: none">id</th>
                                    <th style="display: none">status</th>
                                    <th style="display: none">timestamp</th>

                                    <th>录入日期</th>

                                    <th>指令号</th>

                                    <th>客户名称</th>

                                    <th>品名</th>

                                    <th>箱型</th>


                                    <th>箱量</th>

                                    <th>目的港</th>

                                    <th>贸易方式</th>

                                    <th>交货期限</th>

                                    <th>接单人</th>


                                    <th>承运商</th>

                                    <th >船名航次</th>

                                    <th >提单号</th>

                                    <th>到港日期</th>

                                    <th>放货状态</th>


                                    <th>状态</th>

                                </tr>

                                </thead>

                                <tbody id="tablelist" style="background-color: #ffffff;">
                                <tr >
                                    <td style="display: none">0</td>
                                    <td style="display: none">0</td>
                                    <td style="display: none">2</td>

                                    <td>2017-08-30</td>
                                    <td class="">D001</td>
                                    <td class="">伊利</td>
                                    <td class="">牛奶</td>
                                    <td class="">20GP</td>

                                    <td class="">30</td>
                                    <td class="">黄埔</td>
                                    <td class="">门到门</td>
                                    <td class="">2017-08-26</td>
                                    <td class="">张三</td>

                                    <td class="">中远海远</td>
                                    <td class="">长安103/1120</td>
                                    <td class="">XFHP000123</td>
                                    <td class="">-</td>
                                    <td class="">已放货</td>

                                    <td class="">未确认</td>

                                </tr>
                                <tr>
                                    <td style="display: none">0</td>
                                    <td style="display: none">0</td>
                                    <td style="display: none">1</td>
                                    <td>2017-08-30</td>
                                    <td class="">D002</td>
                                    <td class="">伊利</td>
                                    <td class="">牛奶</td>
                                    <td class="">20GP</td>

                                    <td class="">30</td>
                                    <td class="">黄埔</td>
                                    <td class="">门到门</td>
                                    <td class="">2017-08-26</td>
                                    <td class="">张三</td>

                                    <td class="">中远海远</td>
                                    <td class="">长安103/1120</td>
                                    <td class="">XFHP000123</td>
                                    <td class="">-</td>
                                    <td class="">已放货</td>

                                    <td class="">未确认</td>

                                </tr>

                                <tr class="statusok" >
                                    <td style="display: none">0</td>
                                    <td style="display: none">1</td>
                                    <td style="display: none">1</td>
                                    <td>2017-08-30</td>
                                    <td class="">D003</td>
                                    <td class="">伊利</td>
                                    <td class="">牛奶</td>
                                    <td class="">20GP</td>

                                    <td class="">30</td>
                                    <td class="">黄埔</td>
                                    <td class="">门到门</td>
                                    <td class="">2017-08-26</td>
                                    <td class="">张三</td>

                                    <td class="">中远海远</td>
                                    <td class="">长安103/1120</td>
                                    <td class="">XFHP000123</td>
                                    <td class="">2017-08-26</td>
                                    <td class="">已放货</td>

                                    <td class="">未确认</td>

                                </tr>


                                </tbody>

                            </table>

                        </div>

                    </div>

                    <!-- 业务列表结束-->


                </div>

            </div>

            <!-- 页面内容结束　-->

        </div>

        <!-- CONTAINER　结束-->

    </div>

    <!-- 页面结束 -->
    <div id="static3" class="modal hide fade" tabindex="-1" data-backdrop="static" data-keyboard="false">

        <div class="modal-body">

            <h3 id="user-attention" style="text-align: center"></h3>
            <input type="hidden" value="0" id="user-attentionflag">

        </div>

        <div class="modal-footer">

            <button type="button" data-dismiss="modal" class="btn">放弃</button>

            <button type="button" data-dismiss="modal" class="btn red" id="btn-delrow">确认</button>

        </div>

    </div>

</div>

<!-- CONTAINER 结束-->


<!--引入 JAVASCRIPTS(将JAVASCRIPT放在页面底部，可以减少页面加载时间) -->

<!--核心插件开始-->
<script src="media/js/moment.js" type="text/javascript"></script>

<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>

<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

<!-- IMPORTANT! 在bootstrap.min.js之前加载jquery-ui-1.10.1.custom.min.js以修复与jquery ui工具提示冲突的引导工具提示 -->

<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>

<script src="media/js/bootstrap.min.js" type="text/javascript"></script>


<script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

<script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>

<script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>

<script src="media/js/jquery.uniform.min.js" type="text/javascript"></script>

<!--核心插件结束-->

<!-- 本页插件开始 -->

<script type="text/javascript" src="media/js/jquery.dataTables.js"></script>

<script type="text/javascript" src="media/js/DT_bootstrap.js"></script>

<script type="text/javascript" src="media/js/jquery.validate.min.js"></script>

<script type="text/javascript" src="media/js/chosen.jquery.min.js"></script>

<script type="text/javascript" src="media/js/select2.min.js"></script>

<script type="text/javascript" src="media/js/bootstrap-datepicker.js"></script>

<script type="text/javascript" src="media/js/bootstrap-datetimepicker.js"></script>

<script type="text/javascript" src="media/js/jquery.inputmask.bundle.min.js"></script>

<script type="text/javascript" src="media/js/jquery.input-ip-address-control-1.0.min.js"></script>

<script type="text/javascript" src="media/js/jquery.multi-select.js"></script>

<script src="media/js/bootstrap-modal.js" type="text/javascript"></script>

<script src="media/js/bootstrap-modalmanager.js" type="text/javascript"></script>


<!-- 本页插件结束-->

<!-- 本页JS脚本开始 -->

<script src="media/js/app.js"></script>

<script src="media/js/chuanbodaogangqueren.js"></script>

<script src="media/js/form-validation.js"></script>
<script src="media/js/form-components.js"></script>

<script src="media/js/ui-modals.js"></script>

<script>

    jQuery(document).ready(function () {

        // 初始化布局和插件

        App.init();

        FormValidation.init();
        FormComponents.init();
        TableAdvanced.init();
        UIModals.init();
        var nowTime = new Date();
        $("#arriveport_date").datepicker('setDate', nowTime);
        window.addflag=true;
    });


    // 获得当前时间的时间戳
    function getTimeStamp() {
        var timestamp = new Date().getTime();
        return timestamp;
    }

    //获得当前时间　yyyy-mm-dd
    function getNowFormatDate() {
        var date = new Date();
        var seperator1 = "-";
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate;
        return currentdate;
    }

    //判断操作标志
    var operaflag=true;

    //删除按钮点击
    $('#opera-table').on('click', ' tbody td .btn-del', function () {
        operaflag=false;
        checkAll();
    });

    //提交按钮点击
    $("#btn-submit-opera").click(function () {
        operaflag=true;
        checkAll();
    })

    //   提交信息的函数用operaflag加以区分
    function checkAll() {
        var ev = arguments[0] || window.event;
        var info_id = $("#info-id").val();
        var info_status = $("#info-status").val();
        var info_timestamp = $("#info-timestamp").val();
        var info_addtime = $("#info-addtime").val();
        var info_arriveport_date=$("#arriveport_date").val();
        var theData = new Array();
        //如果是提交的话，获取当前时间戳和日期
        if (operaflag){
            info_status=1;
            info_addtime=getNowFormatDate();
            info_timestamp=getTimeStamp();
            theData[18]=info_arriveport_date;
            theData[19]="已放货";
            theData[20]="已确认";
        }else {
            theData[18]="-";
            theData[19]="已放货";
            theData[20]="未确认";
        }
        //以下是前面按钮和隐藏的属性，注意顺序
        theData[0]=  "<span class=\"row-details row-details-close\"></span>";
        theData[1]=  "<a  class=\"btn blue row-add\" style=\"font-size: 10px;padding: 2px 8px;\">提交</a>";
        theData[2]=info_id;
        theData[3]=info_status;
        theData[4]=info_timestamp;
        theData[5]=info_addtime;
        var j=6;
        var tb=document.getElementById("opera-table");
        for(var k=1;k<tb.rows.length;k++){
            for(var i=1;i<tb.rows[k].cells.length;i++){
                theData[j]=tb.rows[k].cells[i].innerHTML;
                j++;
            }
        }
        var addrownumber=$('#sample_1').dataTable().fnAddData(theData);
//        如果是添加的话，修改属性，并提示用户
        if (operaflag){
            var newTr = $('#sample_1').dataTable().fnSettings().aoData[addrownumber[0]].nTr;
            $(newTr).addClass('statusok');//添加状态ok的class
            var nowTime = new Date();
            $("#arriveport_date").datepicker('setDate', nowTime);
            $("#info-attention").text("添加成功:)");
            $("#static2").modal('show');
        }
        $("#tbody-box").find('tr').remove();//删除原来的
        window.addflag=true;//添加标志复原
    }

</script>

<!-- 本页JS脚本结束 -->
<!-- 引入JAVASCRIPTS结束 -->
</body>

<!-- BODY 结束-->

</html>