<!DOCTYPE html>


<html lang="en">

<!-- HEAD 开始-->

<head>

    <meta charset="utf-8"/>

    <title>船运管理系统</title>


    <meta content="" name="description"/>

    <meta content="" name="author"/>

    <!-- 全局样式开始-->

    <link href="media/mycss/core.css" rel="stylesheet" type="text/css"/>
    <!-- 全局样式结束 -->

    <!-- 本页样式开始 -->
    <link rel="stylesheet" type="text/css" href="media/css/timepicker.css"/>
    <link rel="shortcut icon" href="media/image/favicon.ico"/>

    <!-- 本页样式结束 -->

</head>

<!-- HEAD 结束 -->

<!--  BODY 开始-->

<body class="page-header-fixed">

<!--HEADER 开始-->

<div class="header navbar navbar-inverse navbar-fixed-top myheader">

    <!-- 导航栏开始 -->

    <div class="navbar-inner">

        <div class="container-fluid navbar hor-menu hidden-phone hidden-tablet">

            <div class="navbar hor-menu  hidden-tablet">
                <div class="navbar-inner">
                    <ul class="nav">

                        <li>
                            <a href="kehuweituo.html">客户委托</a>
                        </li>

                        <li>

                            <a href="jinduchaxun.html">进度查询</a>

                        </li>
                        <li>

                            <a href="#">提货方</a>

                        </li>
                        <li>

                            <a href="#">提箱(空/套)</a>

                        </li>
                        <li>

                            <a href="zhongxiangjingangxinxiluru.html">重箱集港</a>

                        </li>

                        <li>

                            <a href="zhongxiangjigangqueren.html">重箱进港</a>
                        </li>
                        <li>

                            <a href="#">重箱进场</a>

                        </li>
                        <li class="active">

                            <a href="#">备位号录入</a>
                            <span class="selected"></span>
                        </li>
                        <li>

                            <a href="#">重箱出场</a>

                        </li>
                        <li>

                            <a href="#">重箱进港</a>

                        </li>
                        <li>

                            <a href="#">重箱装船</a>

                        </li>
                        <li>

                            <a href="#">到港放货</a>

                        </li>
                    </ul>

                </div>

            </div>

        </div>

    </div>

    <!-- 导航栏结束 -->
</div>

<!--HEADER 结束-->


<!--CONTAINER 开始 -->

<div class="page-container row-fluid mycontainer">

    <!-- 页面开始 -->

    <div class="page-content" style="margin-left: 0px">


        <div class="container-fluid">

            <!-- 页面内容开始-->
            <div class="row-fluid">

                <form action="#" class="form-horizontal" style="background-color: aliceblue"
                      onSubmit="return checkAll()">
                    <div class="span12">


                        <!-- 箱号信息开始-->

                        <div class="portlet box blue">

                            <div class="portlet-title" style="margin-top: 30px">

                                <div class="caption"><i class="icon-file"></i>确认信息</div>

                                <div class="tools">
                                </div>

                            </div>

                            <div class="portlet-body form" style="background-color: aliceblue">

                                <!-- 箱号信息 FORM 开始-->


                                <input value="0" id="info-id" type="hidden">
                                <input value="0" id="info-addtime" type="hidden">
                                <input value="0" id="info-timestamp" type="hidden">

                                <div class="row-fluid">

                                    <div class="span6 ">

                                        <div class="control-group" style="margin-left: 100px;width:370px;"
                                             id="group-BN">

                                            <label class="control-label">箱号</label>

                                            <div class="controls">

                                                <input type="text" class="m-wrap span12" readonly id="box_no"/>

                                            </div>

                                        </div>

                                    </div>

                                    <!--/span-->

                                    <div class="span6 ">

                                        <div class="control-group" style="margin-right: 100px;width:370px;"
                                             id="group-SN">

                                            <label class="control-label">备位号</label>

                                            <div class="controls">

                                                <input type="text" class="m-wrap span12" placeholder="手工录入" id="C_SN">

                                            </div>

                                        </div>

                                    </div>

                                    <!--/span-->

                                </div>

                                <!--</form>-->

                                <!-- 箱号信息 FORM 结束-->

                            </div>

                        </div>

                        <!-- 箱号信息结束-->
                    </div>
                    <div class="form-actions">

                        <button type="submit" class="btn blue" id="btn-modal" data-toggle="modal"
                                href="#static" onclick="modalConfirm()" style="float: right">确认提交
                        </button>
                        <!--<a class=" btn yellow" data-toggle="modal" href="#static" onclick="modalConfirm()">View Demo</a>-->
                        <button type="reset" class="btn" id="btn-reset" style="float: right">取消重置</button>
                        <div id="static" class="modal hide fade" tabindex="-1">

                            <div class="modal-body">

                                <p>请确认信息:</p>
                                <table>
                                    <tr>
                                        <td id="td-box_no"></td>

                                        <td id="td-spare_no"></td>
                                    </tr>
                                    <tr><br/></tr>
                                    <tr>
                                        <td>===============其他信息===============</td>
                                    </tr>
                                    <tr>

                                        <td id="td-order_no"></td>

                                        <td id="td-customer_name"></td>
                                    </tr>
                                    <tr>
                                        <td id="td-destport"></td>

                                        <td id="td-box_company"></td>
                                    </tr>
                                    <tr>

                                        <td id="td-box_type"></td>

                                        <td id="td-ship_no"></td>
                                    </tr>
                                    <tr>
                                        <td id="td-lading_no"></td>

                                        <td id="td-entry_time"></td>
                                    </tr>
                                    <tr>

                                        <td id="td-entry_status"></td>

                                        <td id="td-pack_condition"></td>
                                    </tr>
                                    <tr>
                                        <td id="td-flow_condition"></td>

                                        <td id="td-exemp_period"></td>
                                    </tr>
                                    <tr>

                                        <td id="td-entry_carrier"></td>

                                        <td id="td-car_no"></td>
                                    </tr>
                                </table>
                            </div>

                            <div class="modal-footer">

                                <button type="button" data-dismiss="modal" class="btn" id="btn-return">
                                    返回修改
                                </button>
                                <button class="btn green" data-toggle="modal" href="#static2"
                                        id="btn-submit" onclick="checkAll()">继续提交
                                </button>
                            </div>

                        </div>
                        <div id="static2" class="modal hide fade" tabindex="-1">

                            <div class="modal-body">

                                <h3 id="info-attention" style="text-align: center"></h3>

                            </div>

                            <div class="modal-footer">

                                <button type="button" data-dismiss="modal" class="btn green">确认</button>

                            </div>

                        </div>
                    </div>

                </form>
            </div>


            <div class="row-fluid">

                <div class="span12">

                    <!-- 业务列表开始　-->

                    <div class="portlet box green">
                        <!--<div class="portlet box green" style="width:1240px;overflow-x:auto;overflow-y:hidden;">-->
                        <div class="portlet-title">

                            <div class="caption"><i class="icon-list"></i>业务列表</div>

                            <div class="tools">

                                <a href="javascript:;" class="reload"></a>

                            </div>

                        </div>

                        <div class="portlet-body" style="background-color: azure ;">

                            <table class="table table-striped table-bordered table-hover table-full-width"
                                   id="sample_1">

                                <thead>

                                <tr>
                                    <th style="display: none">id</th>

                                    <th style="display: none">timestamp</th>

                                    <th>指令号</th>

                                    <th>客户名称</th>

                                    <th>目的港</th>

                                    <th>箱属公司</th>

                                    <th>箱型</th>

                                    <th>箱号</th>

                                    <th>备位号</th>

                                    <th>航名航次</th>

                                    <th>提单号</th>

                                    <th>进场时间</th>

                                    <th>进场状态</th>

                                    <th>装箱条件</th>

                                    <th>流向条件</th>

                                    <th>免存期</th>

                                    <th>进场承运商</th>

                                    <th>车号</th>

                                </tr>

                                </thead>

                                <tbody id="tablelist" style="background-color: #ffffff;">
                                <tr class="odd">
                                    <td style="display: none">1</td>
                                    <td style="display: none">1</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">信丰海运</td>
                                    <td class="">20GP</td>
                                    <td class="">TEMU1234567</td>
                                    <td class="">-</td>
                                    <td class="">长安103/1120</td>
                                    <td class="">XFHP000123</td>
                                    <td class="">8月30日</td>
                                    <td class="">空箱进场</td>
                                    <td class="">无限制</td>
                                    <td class="">无限制</td>
                                    <td class="">20</td>
                                    <td class="">胜腾物流</td>
                                    <td class="">津A1234</td>
                                </tr>
                                <tr class="even">
                                    <td style="display: none">1</td>
                                    <td style="display: none">1</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">信丰海运</td>
                                    <td class="">20GP</td>
                                    <td class="">TEMU1234568</td>
                                    <td class="">-</td>
                                    <td class="">长安103/1120</td>
                                    <td class="">XFHP000123</td>
                                    <td class="">8月30日</td>
                                    <td class="">外协进场</td>
                                    <td class="">无限制</td>
                                    <td class="">无限制</td>
                                    <td class="">20</td>
                                    <td class="">胜腾物流</td>
                                    <td class="">津A1234</td>
                                </tr>
                                <tr class="odd">
                                    <td style="display: none">1</td>
                                    <td style="display: none">1</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">中远海运</td>
                                    <td class="">20GP</td>
                                    <td class="">DFIU2221234</td>
                                    <td class="">-</td>
                                    <td class="">新长沙/0025</td>
                                    <td class="">NSTJ222345</td>
                                    <td class="">8月30日</td>
                                    <td class="">掏箱进场</td>
                                    <td class="">A类箱</td>
                                    <td class="">30</td>
                                    <td class="">20</td>
                                    <td class="">胜腾物流</td>
                                    <td class="">津B2234</td>
                                </tr>
                                <tr class="odd">
                                    <td style="display: none">1</td>
                                    <td style="display: none">1</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">-</td>
                                    <td class="">信丰海运</td>
                                    <td class="">20GP</td>
                                    <td class="">TEMU1234567</td>
                                    <td class="">-</td>
                                    <td class="">长安103/1120</td>
                                    <td class="">XFHP000123</td>
                                    <td class="">8月30日</td>
                                    <td class="">空箱进场</td>
                                    <td class="">无限制</td>
                                    <td class="">无限制</td>
                                    <td class="">20</td>
                                    <td class="">胜腾物流</td>
                                    <td class="">津A1234</td>
                                </tr>


                                </tbody>

                            </table>

                        </div>

                    </div>

                    <!-- 业务列表结束-->


                </div>

            </div>

            <!-- 页面内容结束　-->

        </div>

        <!-- CONTAINER　结束-->

    </div>

    <!-- 页面结束 -->
    <div id="static3" class="modal hide fade" tabindex="-1" data-backdrop="static" data-keyboard="false">

        <div class="modal-body">

            <h3 id="user-attention" style="text-align: center"></h3>
            <input type="hidden" value="0" id="user-attentionflag">

        </div>

        <div class="modal-footer">

            <button type="button" data-dismiss="modal" class="btn">放弃</button>

            <button type="button" data-dismiss="modal" class="btn red" id="btn-delrow">确认</button>

        </div>

    </div>

</div>

<!-- CONTAINER 结束-->


<!--引入 JAVASCRIPTS(将JAVASCRIPT放在页面底部，可以减少页面加载时间) -->

<!--核心插件开始-->
<script src="media/js/moment.js" type="text/javascript"></script>

<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>

<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

<!-- IMPORTANT! 在bootstrap.min.js之前加载jquery-ui-1.10.1.custom.min.js以修复与jquery ui工具提示冲突的引导工具提示 -->

<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>

<script src="media/js/bootstrap.min.js" type="text/javascript"></script>


<script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

<script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>

<script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>

<script src="media/js/jquery.uniform.min.js" type="text/javascript"></script>

<!--核心插件结束-->

<!-- 本页插件开始 -->

<script type="text/javascript" src="media/js/jquery.dataTables.js"></script>

<script type="text/javascript" src="media/js/DT_bootstrap.js"></script>

<script type="text/javascript" src="media/js/jquery.validate.min.js"></script>

<script type="text/javascript" src="media/js/chosen.jquery.min.js"></script>

<script type="text/javascript" src="media/js/select2.min.js"></script>

<script type="text/javascript" src="media/js/bootstrap-datepicker.js"></script>

<script type="text/javascript" src="media/js/bootstrap-datetimepicker.js"></script>

<script type="text/javascript" src="media/js/jquery.inputmask.bundle.min.js"></script>

<script type="text/javascript" src="media/js/jquery.input-ip-address-control-1.0.min.js"></script>

<script type="text/javascript" src="media/js/jquery.multi-select.js"></script>

<script src="media/js/bootstrap-modal.js" type="text/javascript"></script>

<script src="media/js/bootstrap-modalmanager.js" type="text/javascript"></script>


<!-- 本页插件结束-->

<!-- 本页JS脚本开始 -->

<script src="media/js/app.js"></script>

<script src="media/js/beiweihaoluru.js"></script>

<script src="media/js/form-validation.js"></script>
<script src="media/js/form-components.js"></script>

<script src="media/js/ui-modals.js"></script>
<script type="text/javascript" src="media/js/bootstrap-timepicker.js"></script>
<script>

    jQuery(document).ready(function () {

        // 初始化布局和插件

        App.init();

        FormValidation.init();
        FormComponents.init();
        TableAdvanced.init();
        UIModals.init();
        var nowTime = new Date();
        $("#info-pickdate").datepicker('setDate', nowTime);
        $("#info-recdate").datepicker('setDate', nowTime);
    });

    var order_no;
    var customer_name;
    var destport;
    var box_company;
    var box_type;

    var box_no;
    var spare_no;
    var ship_no;
    var lading_no;
    var entry_time;

    var entry_status;
    var pack_condition;
    var flow_condition;
    var exemp_period;
    var entry_carrier;

    var car_no;


    /*客户信息模态框初始化信息*/
    function modalConfirm() {

        $("#td-box_no").text("箱号: " + box_no);

        spare_no = $("#C_SN").val();
        $("#td-spare_no").text("   备位号: " + spare_no);

        $("#td-order_no").text("   指令号: " + order_no);
        $("#td-customer_name").text("   客户名称: " + customer_name);

        $("#td-destport").text("   目的港: " + destport);
        $("#td-box_company").text("   箱属公司: " + box_company);

        $("#td-box_type").text("   箱型: " + box_type);
        $("#td-ship_no").text("   航名航次: " + ship_no);

        $("#td-lading_no").text("   提单号:  " + lading_no);
        $("#td-entry_time").text("   进场时间:  " + entry_time);

        $("#td-entry_status").text("   进场状态:  " + entry_status);
        $("#td-pack_condition").text("   装箱条件:  " + pack_condition);

        $("#td-flow_condition").text("   流向条件:  " + flow_condition);
        $("#td-exemp_period").text("   免存期:  " + exemp_period);

        $("#td-entry_carrier").text("   进场承运商:  " + entry_carrier);
        $("#td-car_no").text("   车号:  " + car_no);

    }

    //    数字输入检查
    function isNum(str) {
        if (str != null && str != "") {
            return !isNaN(str);
        }
        return false;
    }

    //输入框检查
    function checkInput(str) {
        if (str == null || str == "") {
            return false;
        } else {
            return true;
        }
    }

    //    下拉框检查
    function checkSelect(str) {
        if (str == "请选择...") {
            return false;
        } else {
            return true;
        }
    }

    //    获得当前时间的时间戳
    function getTimeStamp() {
        var timestamp = new Date().getTime();
        return timestamp;
    }

    //获得当前时间　yyyy-mm-dd hh:mm:ss
    function getNowFormatDate() {
        var date = new Date();
        var seperator1 = "-";
        var seperator2 = ":";
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        var minutes = date.getMinutes();
        var seconds = date.getSeconds();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        if (minutes >= 0 && minutes <= 9) {
            minutes = "0" + minutes;
        }
        if (seconds >= 0 && seconds <= 9) {
            seconds = "0" + seconds;
        }
        var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
            + " " + date.getHours() + seperator2 + minutes
            + seperator2 + seconds;
        return currentdate;
    }

    //    重置输入框
    function resetAll() {
        $("#btn-reset").click();
    }

    //    重新刷新表格数据
    function reloadData(theData) {

        if (theData[2] == 0) {
            theData[2] = getNowFormatDate();
            theData[3] = "<td class=\"myhidden sorting_1\">" + getTimeStamp() + "</td>";
        }
        $('#sample_1').dataTable().fnAddData(theData);

        resetAll();

        $("form select").each(function (index, item) {
            $(item).find('option').each(function () {
                $(this).removeAttrs('selected');
            });
        });

        $('.chzn-container-single span').html('请选择...');

        $("#info-attention").text("添加成功:)");
        var nowTime = new Date();
        $("#info-pickdate").datepicker('setDate', nowTime);
        $("#info-recdate").datepicker('setDate', nowTime);
    }

    //   客户信息检查入口
    function checkAll() {
        var ev = arguments[0] || window.event;
        var info_id = $("#info-id").val();
        var info_addtime = $("#info-addtime").val();
        var info_timestamp = $("#info-timestamp").val();

//        getInfoData();
        $('#static').modal('hide')

        var check = true;

        if (!checkInput(spare_no)) {
            $("#group-SN").addClass("error");
            check = false;
        }
        if (!checkInput(box_no)) {
            $("#group-BN").addClass("error");
            check = false;
        }

        if (!check) {
//            alert("请检查...");
            $("#info-attention").text("请检查红色区域:(");
//            resetAll();
        } else {
            var theData = [
                "<span class=\"row-details row-details-close\"></span>",
                "<a  class=\"btn blue row-add\" style=\"font-size: 10px;padding: 2px 8px;\">提交</a>",
                info_addtime, info_id,
                order_no, customer_name, destport, box_company, box_type,
                box_no, spare_no, ship_no, lading_no, entry_time,
                entry_status, pack_condition, flow_condition, exemp_period, entry_carrier,
                car_no

            ];

            //        var theTable = $('#sample_1').dataTable();
            //        theTable.fnClearTable();
            //        alert(1);
//            $('#sample_1').dataTable().fnAddData(theData);
//            alert("添加成功");
//            resetAll();
            reloadData(theData);
            check = true;
        }


        return false;

    }

    //    以下为客户信息状态转换产生的事件
    $("#info-order").change(function () {
        $("#group-order").removeClass("error");
    });
    $("#info-boxnum").change(function () {
        $("#group-boxnum").removeClass("error");
    });
    $("#info-boxtype").change(function () {
        $("#group-boxtype").removeClass("error");
    });
    $("#info-goodsname").change(function () {
        $("#group-goodsname").removeClass("error");
    });

    $("#info-clientname").change(function () {
        $("#group-clientname").removeClass("error");

    });
    $("#info-clientname").mouseleave($.post("#", {}, function (data) {
        data = {"addrinfo": [{"id": 1, "name": "大连"}, {"id": 2, "name": "北京"}]};
        var addrlist = data.addrinfo;
        var str;
        $.each(addrlist, function (n, addr) {
            str += "<option value=\"" +
                addr.id +
                "\">" +
                addr.name +
                "</option>";
        })
        $("#info-pickaddr").append(str);
        $("#info-recaddr").append(str);
    }));
    $("#info-port").change(function () {
        $("#group-port").removeClass("error");
    });
    $("#info-tradetype").change(function () {
        $("#group-tradetype").removeClass("error");
    });
    $("#info-billcycle").change(function () {
        $("#group-billcycle").removeClass("error");
    });

    $("#info-pickdate").change(function () {
        $("#group-pickdate").removeClass("error");
    });
    $("#info-pickaddr").change(function () {
        $("#group-pickaddr").removeClass("error");
    });
    $("#info-pickaddr").mouseleave($.post("#", {}, function (data) {
        data = {"personinfo": [{"id": 1, "name": "张三"}, {"id": 2, "name": "李四"}]};
        var personlist = data.personinfo;
        var str;
        $.each(personlist, function (n, person) {
            str += "<option value=\"" +
                person.id +
                "\">" +
                person.name +
                "</option>";
        })
        $("#info-pickperson").append(str);
    }));
    $("#info-pickperson").change(function () {
        $("#group-pickperson").removeClass("error");
    });
    $("#info-pickperson").mouseleave($.post("#", {}, function (data) {
        data = {"telinfo": [{"id": 1, "name": "12345678"}, {"id": 2, "name": "987654321"}]};
        var tellist = data.telinfo;
        var str;
        $.each(tellist, function (n, tel) {
            str += "<option value=\"" +
                tel.id +
                "\">" +
                tel.name +
                "</option>";
        })
        $("#info-picktel").append(str);
    }));
    $("#info-picktel").change(function () {
        $("#group-picktel").removeClass("error");
    });

    $("#info-recdate").change(function () {
        $("#group-recdate").removeClass("error");
    });
    $("#info-recaddr").change(function () {
        $("#group-recaddr").removeClass("error");
    });
    $("#info-recaddr").mouseleave($.post("#", {}, function (data) {
        data = {"personinfo": [{"id": 1, "name": "张三"}, {"id": 2, "name": "李四"}]};
        var personlist = data.personinfo;
        var str;
        $.each(personlist, function (n, person) {
            str += "<option value=\"" +
                person.id +
                "\">" +
                person.name +
                "</option>";
        })
        $("#info-recperson").append(str);
    }));
    $("#info-recperson").change(function () {
        $("#group-recperson").removeClass("error");
    });
    //
    $("#info-recperson").mouseleave($.post("#", {}, function (data) {
        data = {"telinfo": [{"id": 1, "name": "张三"}, {"id": 2, "name": "李四"}]};
        var tellist = data.telinfo;
        var str;
        $.each(tellist, function (n, tel) {
            str += "<option value=\"" +
                tel.id +
                "\">" +
                tel.name +
                "</option>";
        })
        $("#info-rectel").append(str);
    }));
    $("#info-rectel").change(function () {
        $("#group-rectel").removeClass("error");
    });
</script>

<!-- 本页JS脚本结束 -->
<!-- 引入JAVASCRIPTS结束 -->
</body>

<!-- BODY 结束-->

</html>